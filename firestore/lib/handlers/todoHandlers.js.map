{"version":3,"file":"todoHandlers.js","names":["_todoRepository","require","getTodo","ctx","id","params","fields","request","body","todo","getOneTodo","status","data","success","error","message","getTodos","sort","limit","todos","getTodosWithParams","e","createTd","createTodo","remove","removeTodos","update","updateTodos","updateMultiple","ids","removeMultiple","console","log"],"sources":["../../src/handlers/todoHandlers.js"],"sourcesContent":["import {\r\n  createTodo,\r\n  getTodosWithParams,\r\n  removeTodos,\r\n  updateTodos,\r\n  getOneTodo,\r\n} from \"../database/todoRepository\";\r\n\r\nexport async function getTodo(ctx) {\r\n  try {\r\n    const { id } = ctx.params;\r\n    const { fields } = ctx.request.body;\r\n    const todo = await getOneTodo(id, fields);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      data: todo,\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    ctx.status = 500;\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\nexport async function getTodos(ctx) {\r\n  try {\r\n    const { sort, limit } = ctx.params;\r\n\r\n    const todos = await getTodosWithParams({ sort, limit });\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      data: todos,\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 500;\r\n    return (ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function createTd(ctx) {\r\n  try {\r\n    const data = await createTodo(ctx.request.body);\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n      data,\r\n    });\r\n  } catch (e) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function remove(ctx) {\r\n  try {\r\n    const { id } = ctx.params;\r\n    await removeTodos([id]);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function update(ctx) {\r\n  try {\r\n    const { id } = ctx.request.params;\r\n    await updateTodos([id]);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function updateMultiple(ctx) {\r\n  try {\r\n    const { ids } = ctx.request.body;\r\n    await updateTodos(ids);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\nexport async function removeMultiple(ctx) {\r\n  try {\r\n    const { ids } = ctx.request.body;\r\n    await removeTodos(ids);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\n"],"mappings":"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"}