{"version":3,"file":"todoHandlers.js","names":["_todoRepository","require","getTodo","ctx","id","params","fields","request","body","todo","getOneTodo","status","data","success","error","message","getTodos","todos","getTodosWithParams","query","e","createTd","createTodo","remove","removeTodos","update","updateTodos","updateMultiple","ids","removeMultiple","console","log"],"sources":["../../src/handlers/todoHandlers.js"],"sourcesContent":["import {\r\n  createTodo,\r\n  getTodosWithParams,\r\n  removeTodos,\r\n  updateTodos,\r\n  getOneTodo,\r\n} from \"../database/todoRepository\";\r\n\r\nexport async function getTodo(ctx) {\r\n  try {\r\n    const { id } = ctx.params;\r\n    const { fields } = ctx.request.body;\r\n    const todo = await getOneTodo(id, fields);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      data: todo,\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    ctx.status = 500;\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\nexport async function getTodos(ctx) {\r\n  try {\r\n    const todos = await getTodosWithParams(ctx.request.query);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      data: todos,\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 500;\r\n    return (ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function createTd(ctx) {\r\n  try {\r\n    const data = await createTodo(ctx.request.body);\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n      data,\r\n    });\r\n  } catch (e) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function remove(ctx) {\r\n  try {\r\n    const { id } = ctx.params;\r\n    await removeTodos([id]);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function update(ctx) {\r\n  try {\r\n    const { id } = ctx.request.params;\r\n    await updateTodos([id]);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function updateMultiple(ctx) {\r\n  try {\r\n    const { ids } = ctx.request.body;\r\n    await updateTodos(ids);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\nexport async function removeMultiple(ctx) {\r\n  try {\r\n    const { ids } = ctx.request.body;\r\n    await removeTodos(ids);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\n"],"mappings":"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"}