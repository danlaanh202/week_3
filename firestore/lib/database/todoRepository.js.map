{"version":3,"file":"todoRepository.js","names":["_dbInit","_interopRequireDefault","require","obj","__esModule","default","todoRef","db","collection","getAllTodoes","snapshot","get","docs","map","doc","data","createTodo","res","id","set","removeTodo","delete","toggleTodo","updateDoc","ref","update","isCompleted","removeMultipleTodoes","ids","length","where","batch","forEach","commit","completeMultipleTodoes"],"sources":["../../src/database/todoRepository.js"],"sourcesContent":["import db from \"./dbInit\";\r\n\r\nconst todoRef = db.collection(\"todoes\");\r\n\r\nexport async function getAllTodoes() {\r\n  const snapshot = await todoRef.get();\r\n  return snapshot.docs.map((doc) => doc.data());\r\n}\r\n\r\nexport async function createTodo(data) {\r\n  const res = await todoRef.doc(data.id).set(data);\r\n  return res;\r\n}\r\n\r\nexport async function removeTodo(id) {\r\n  return await todoRef.doc(id).delete();\r\n}\r\n\r\nexport async function toggleTodo(id) {\r\n  const updateDoc = await todoRef.doc(id).get();\r\n  await updateDoc.ref.update({\r\n    isCompleted: !updateDoc.data().isCompleted,\r\n  });\r\n}\r\nexport async function removeMultipleTodoes(ids) {\r\n  if (!ids || ids?.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const docs = await todoRef.where(\"id\", \"in\", ids).get();\r\n\r\n  let batch = db.batch();\r\n  docs.forEach((doc) => {\r\n    batch.delete(doc.ref);\r\n  });\r\n  return batch.commit();\r\n}\r\nexport async function completeMultipleTodoes(ids) {\r\n  if (!ids) {\r\n    return;\r\n  }\r\n  const docs = await todoRef.where(\"id\", \"in\", ids).get();\r\n  docs.forEach((doc) => {\r\n    batch.update(doc.ref, { isCompleted: true });\r\n  });\r\n  return batch.commit();\r\n}\r\n"],"mappings":";;;;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA0B,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE1B,MAAMG,OAAO,GAAGC,eAAE,CAACC,UAAU,CAAC,QAAQ,CAAC;AAEhC,eAAeC,YAAYA,CAAA,EAAG;EACnC,MAAMC,QAAQ,GAAG,MAAMJ,OAAO,CAACK,GAAG,CAAC,CAAC;EACpC,OAAOD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC;AAC/C;AAEO,eAAeC,UAAUA,CAACD,IAAI,EAAE;EACrC,MAAME,GAAG,GAAG,MAAMX,OAAO,CAACQ,GAAG,CAACC,IAAI,CAACG,EAAE,CAAC,CAACC,GAAG,CAACJ,IAAI,CAAC;EAChD,OAAOE,GAAG;AACZ;AAEO,eAAeG,UAAUA,CAACF,EAAE,EAAE;EACnC,OAAO,MAAMZ,OAAO,CAACQ,GAAG,CAACI,EAAE,CAAC,CAACG,MAAM,CAAC,CAAC;AACvC;AAEO,eAAeC,UAAUA,CAACJ,EAAE,EAAE;EACnC,MAAMK,SAAS,GAAG,MAAMjB,OAAO,CAACQ,GAAG,CAACI,EAAE,CAAC,CAACP,GAAG,CAAC,CAAC;EAC7C,MAAMY,SAAS,CAACC,GAAG,CAACC,MAAM,CAAC;IACzBC,WAAW,EAAE,CAACH,SAAS,CAACR,IAAI,CAAC,CAAC,CAACW;EACjC,CAAC,CAAC;AACJ;AACO,eAAeC,oBAAoBA,CAACC,GAAG,EAAE;EAC9C,IAAI,CAACA,GAAG,IAAIA,GAAG,EAAEC,MAAM,KAAK,CAAC,EAAE;IAC7B;EACF;EAEA,MAAMjB,IAAI,GAAG,MAAMN,OAAO,CAACwB,KAAK,CAAC,IAAI,EAAE,IAAI,EAAEF,GAAG,CAAC,CAACjB,GAAG,CAAC,CAAC;EAEvD,IAAIoB,KAAK,GAAGxB,eAAE,CAACwB,KAAK,CAAC,CAAC;EACtBnB,IAAI,CAACoB,OAAO,CAAElB,GAAG,IAAK;IACpBiB,KAAK,CAACV,MAAM,CAACP,GAAG,CAACU,GAAG,CAAC;EACvB,CAAC,CAAC;EACF,OAAOO,KAAK,CAACE,MAAM,CAAC,CAAC;AACvB;AACO,eAAeC,sBAAsBA,CAACN,GAAG,EAAE;EAChD,IAAI,CAACA,GAAG,EAAE;IACR;EACF;EACA,MAAMhB,IAAI,GAAG,MAAMN,OAAO,CAACwB,KAAK,CAAC,IAAI,EAAE,IAAI,EAAEF,GAAG,CAAC,CAACjB,GAAG,CAAC,CAAC;EACvDC,IAAI,CAACoB,OAAO,CAAElB,GAAG,IAAK;IACpBiB,KAAK,CAACN,MAAM,CAACX,GAAG,CAACU,GAAG,EAAE;MAAEE,WAAW,EAAE;IAAK,CAAC,CAAC;EAC9C,CAAC,CAAC;EACF,OAAOK,KAAK,CAACE,MAAM,CAAC,CAAC;AACvB"}