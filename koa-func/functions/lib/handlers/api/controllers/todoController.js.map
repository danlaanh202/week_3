{"version":3,"file":"todoController.js","names":["_todoRepository","require","getOne","ctx","id","params","fields","req","body","todo","getOneTodo","status","data","success","error","message","getMany","todos","getTodos","query","e","createTd","createTodo","remove","removeTodos","update","console","log","updateTodos","updateMultiple","removeMultiple","ids","length","Error"],"sources":["../../../../src/handlers/api/controllers/todoController.js"],"sourcesContent":["import {\r\n  createTodo,\r\n  getTodos,\r\n  removeTodos,\r\n  updateTodos,\r\n  getOneTodo,\r\n} from \"../../../repositories/todoRepository\";\r\n\r\nexport async function getOne(ctx) {\r\n  try {\r\n    const { id } = ctx.params;\r\n    const { fields } = ctx.req.body;\r\n    const todo = await getOneTodo(id, fields);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      data: todo,\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    ctx.status = 500;\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\nexport async function getMany(ctx) {\r\n  try {\r\n    const todos = await getTodos(ctx.req.query);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      data: todos,\r\n      success: true,\r\n    });\r\n  } catch (e) {\r\n    ctx.status = 500;\r\n    return (ctx.body = {\r\n      success: false,\r\n      data: [],\r\n      error: e.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function createTd(ctx) {\r\n  try {\r\n    const data = await createTodo(ctx.req.body);\r\n    ctx.status = 201;\r\n    return (ctx.body = {\r\n      success: true,\r\n      data,\r\n    });\r\n  } catch (e) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: e.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function remove(ctx) {\r\n  try {\r\n    const { id } = ctx.params;\r\n    await removeTodos([id]);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function update(ctx) {\r\n  try {\r\n    const { id } = ctx.params;\r\n    const { todo } = ctx.req.body;\r\n    console.log(id);\r\n    await updateTodos([{ ...todo, id }]);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function updateMultiple(ctx) {\r\n  try {\r\n    const { todos } = ctx.req.body;\r\n    await updateTodos(todos);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\nexport async function removeMultiple(ctx) {\r\n  try {\r\n    const { ids } = ctx.req.body;\r\n    if (!ids?.length) {\r\n      throw new Error();\r\n    }\r\n    await removeTodos(ids);\r\n    ctx.status = 200;\r\n    return (ctx.body = {\r\n      success: true,\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n    return (ctx.body = {\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n}\r\n"],"mappings":"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"}